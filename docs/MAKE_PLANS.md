# MAKE_PLANS


## 概要
このファイルでは、Codexによる開発で参照する、`PLANS.md`を作成するためのルールを記述する。

## PLANS.mdの基本構成
PLANS.mdは以下の項目を必ず含むこと。

**ExecPlanの主要セクション**
- 目的/全体像
- 進捗
- 決定ログ
- 驚きと発見
- 文脈とオリエンテーション
- 作業計画
- 具体的なステップ
- 検証と受け入れ

**全体構造の階層図**

PLAMS.md - プロジェクト実行計画書（ExecPlan）
│
├── 【前文・メタ情報セクション】
│   ├── プロジェクトメタ情報（名前、日付、ブランチ、関連ドキュメント）
│   ├── 重要な注意事項（生きた文書、自己完結性）
│   └── このドキュメントの使い方（実装者向け・レビュー者向け）
│
├── 【前提・要件セクション】
│   └── 要件（ExecPlanの必須要件）
│
├── 【計画・設計セクション】
│   ├── 1. 目的/全体像
│   │   ├── 1.1 プロジェクトの目的（What/Why/Who）
│   │   ├── 1.2 スコープ（対象範囲・対象外）
│   │   └── 1.3 成功指標
│   │
│   ├── 2. 進捗
│   │   ├── 2.1 現在のステータス
│   │   ├── 2.2 詳細な進捗チェックリスト
│   │   ├── 2.3 次のマイルストーン
│   │   └── 2.4 ブロッカー・課題
│   │
│   ├── 3. 決定ログ
│   │   ├── 3.1 技術選定
│   │   ├── 3.2 アーキテクチャ決定
│   │   └── 3.3 設計原則
│   │
│   ├── 4. 驚きと発見
│   │   ├── 4.1 技術的知見
│   │   └── 4.2 要件・仕様の変更
│   │
│   └── 5. 文脈とオリエンテーション
│       ├── 5.1 プロジェクト背景
│       ├── 5.2 技術的背景
│       ├── 5.3 プロジェクト構造
│       └── 5.4 関連ドキュメント
│
├── 【実装計画セクション】
│   ├── 6. 作業計画
│   │   ├── 6.1 フェーズ1: 基盤構築（Week 1-2）
│   │   ├── 6.2 フェーズ2: コア機能実装（Week 3-5）
│   │   └── 6.3 フェーズ3: 統合・テスト（Week 6-7）
│   │
│   └── 7. 具体的なステップ
│       ├── 7.1 フェーズ1の詳細ステップ
│       ├── 7.2 フェーズ2の詳細ステップ
│       └── 7.3 フェーズ3の詳細ステップ
│
├── 【検証・品質セクション】
│   └── 8. 検証と受け入れ
│       ├── 8.1 機能検証チェックリスト
│       ├── 8.2 非機能要件検証
│       ├── 8.3 コード品質チェック
│       ├── 8.4 受け入れ基準
│       └── 8.5 本番リリース前チェックリスト
│
├── 【運用・保守セクション】
│   ├── 9. べき等性と回復（Idempotence and Recovery）
│   │   ├── 9.1 べき等性の保証
│   │   ├── 9.2 失敗時の回復手順
│   │   ├── 9.3 ロールバック手順
│   │   └── 9.4 環境のクリーンアップ
│   │
│   ├── 10. 成果物とメモ（Artifacts and Notes）
│   │   ├── 10.1 重要なコマンド実行結果
│   │   ├── 10.2 重要なコード差分
│   │   ├── 10.3 テスト実行結果
│   │   ├── 10.4 パフォーマンス測定結果
│   │   └── 10.5 デバッグログと解決策
│   │
│   └── 11. インターフェースと依存関係（Interfaces and Dependencies）
│       ├── 11.1 データベーススキーマインターフェース
│       ├── 11.2 tRPC APIインターフェース
│       ├── 11.3 UIコンポーネントインターフェース
│       ├── 11.4 外部依存関係の詳細
│       └── 11.5 環境変数の完全なリスト
│
└── 【履歴・参照セクション】
    ├── 12. 変更履歴（Change Log）
    └── 13. 関連リソース
        ├── 13.1 今後の拡張予定
        ├── 13.2 既知の制限事項
        └── 13.3 参考ドキュメント・リンク


**各セクションの役割と解説**

【前文・メタ情報セクション】
プロジェクトメタ情報
- 目的: プロジェクトの基本情報を明示
- 内容: プロジェクト名、作成日、最終更新日、バージョン、ブランチ、関連ドキュメント

重要な注意事項
- 目的: ExecPlanの性質と運用方針を明示
- 内容: 「生きた文書」であること、自己完結性、継続的更新の必要性

このドキュメントの使い方
- 目的: 実装者とレビュー者への指針
- 内容: 実装者向けの作業手順、レビュー者向けの記録方針

【前提・要件セクション】
- 要件
 - 目的: ExecPlanの必須要件を定義
 - 内容: 自己完結性、生きた文書、初心者でも実装可能、実証可能な動作、専門用語の平易化

【計画・設計セクション】
1. 目的/全体像
- 目的: プロジェクトの目的・スコープ・成功指標を定義
- 内容: What/Why/Who、対象範囲・対象外、成功指標
2. 進捗
- 目的: 現在の進捗と次のアクションを記録
- 内容: ステータス、チェックリスト、次のマイルストーン、ブロッカー
3. 決定ログ
- 目的: 技術選定・設計決定と理由を記録
- 内容: 技術選定表、アーキテクチャ決定表、設計原則
4. 驚きと発見
- 目的: 実装中の発見・課題・変更を記録
- 内容: 技術的知見、要件・仕様の変更
5. 文脈とオリエンテーション
- 目的: プロジェクトの背景と技術的コンテキストを提供
- 内容: プロジェクト背景、技術的背景、プロジェクト構造、関連ドキュメント

【実装計画セクション】
6. 作業計画
- 目的: フェーズ別の作業計画を提示
- 内容: フェーズ1（基盤構築）、フェーズ2（コア機能）、フェーズ3（統合・テスト）
7. 具体的なステップ
- 目的: 実装可能な詳細ステップを提供
- 内容: 各フェーズの詳細ステップ、コード例、実行コマンド、受け入れ基準

【検証・品質セクション】
8. 検証と受け入れ
- 目的: 検証項目と受け入れ基準を定義
- 内容: 機能検証チェックリスト、非機能要件検証、コード品質チェック、受け入れ基準、本番リリース前チェックリスト

【運用・保守セクション】
9. べき等性と回復
- 目的: 安全な再実行と失敗時の回復手順を定義
- 内容: べき等性の保証、失敗時の回復手順、ロールバック手順、環境のクリーンアップ
10. 成果物とメモ
- 目的: 実装中の成果物とメモを記録
- 内容: コマンド実行結果、コード差分、テスト結果、パフォーマンス測定、デバッグログ
11. インターフェースと依存関係
- 目的: 主要なインターフェースと依存関係を定義
- 内容: データベーススキーマ、tRPC API、UIコンポーネント、外部依存関係、環境変数

【履歴・参照セクション】
12. 変更履歴
- 目的: 重要な変更を時系列で記録
- 内容: 変更記録（日付、内容、理由、影響範囲、変更者）

13. 関連リソース
- 目的: 拡張予定、制限事項、参考資料を提供
- 内容: 拡張予定、既知の制限事項、参考ドキュメント・リンク

**構成の特徴**

1. 自己完結性
- 外部ドキュメントへの依存を最小化し、必要な情報を文書内に含める

2. 時系列の記録
- 進捗、決定ログ、驚きと発見、変更履歴で時系列を追跡可能

3. 実装者視点
- 具体的なステップ、コード例、実行コマンド、受け入れ基準を提供

4. 安全性の重視
- べき等性、回復手順、ロールバック手順を明示

5.継続的更新
「生きた文書」として、進捗・発見・決定を継続的に更新

6. 検証可能性
- 検証チェックリストと受け入れ基準を明確化


**ドキュメントの使用フロー**

【計画・設計】 ←→ 【実装計画】
     ↓                ↓
【検証・品質】 ←→ 【運用・保守】
     ↓                ↓
【履歴・参照】 ←→ 【前文・メタ情報】


**セクション間の関係性**

【計画・設計】 ←→ 【実装計画】
     ↓                ↓
【検証・品質】 ←→ 【運用・保守】
     ↓                ↓
【履歴・参照】 ←→ 【前文・メタ情報】

- 計画・設計 → 実装計画: 設計に基づいて実装ステップを定義
- 実装計画 → 検証・品質: 実装結果を検証
- 検証・品質 → 運用・保守: 検証結果を運用に反映
- 運用・保守 → 履歴・参照: 運用中の知見を記録
- 履歴・参照 → 計画・設計: 過去の知見を計画に反映

この構成により、初心者でも実装を完了でき、AIエージェントが自律的に作業を進められるようになっています。


## 参照すべきサイト
https://cookbook.openai.com/articles/codex_exec_plans